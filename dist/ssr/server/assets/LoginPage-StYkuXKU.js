import{ref as k,resolveComponent as m,mergeProps as F,withCtx as n,createVNode as e,createBlock as R,createCommentVNode as j,openBlock as B,toDisplayString as N,withModifiers as z,useSSRContext as G}from"vue";import{ssrRenderComponent as o,ssrInterpolate as K}from"vue/server-renderer";import O from"axios";import{useRouter as Q}from"vue-router";const y={__name:"LoginCard",__ssrInlineRender:!0,setup(i){const t=k(""),l=k(""),a=k(""),q=Q();async function c(){try{const r=await O.post("/api/login/login",{username:t.value,password:l.value});r.data.success?await q.push("/landing"):a.value=r.data.message}catch(r){a.value=r.response?.data?.error||r.message}}return(r,_,w,U)=>{const J=m("q-card"),g=m("q-card-section"),D=m("q-separator"),L=m("q-form"),s=m("q-input"),V=m("q-btn");_(o(J,F({class:"q-pa-lg",style:{"min-width":"350px"}},U),{default:n((T,b,C,S)=>{if(b)b(o(g,null,{default:n((p,v,M,P)=>{if(v)v(`<div class="text-h6 text-center"${P}>Login</div>`);else return[e("div",{class:"text-h6 text-center"},"Login")]}),_:1},C,S)),b(o(D,null,null,C,S)),b(o(g,null,{default:n((p,v,M,P)=>{if(v)v(o(L,{onSubmit:c,class:"q-gutter-md"},{default:n((x,u,$,f)=>{if(u)u(o(s,{filled:"",modelValue:t.value,"onUpdate:modelValue":d=>t.value=d,label:"Username",dense:"",autofocus:""},null,$,f)),u(o(s,{filled:"",modelValue:l.value,"onUpdate:modelValue":d=>l.value=d,label:"Password",type:"password",dense:""},null,$,f)),a.value?u(`<div class="text-negative text-center q-mb-sm"${f}>${K(a.value)}</div>`):u("<!---->"),u(`<div class="row justify-center"${f}>`),u(o(V,{label:"Login",type:"submit",color:"primary"},null,$,f)),u("</div>");else return[e(s,{filled:"",modelValue:t.value,"onUpdate:modelValue":d=>t.value=d,label:"Username",dense:"",autofocus:""},null,8,["modelValue","onUpdate:modelValue"]),e(s,{filled:"",modelValue:l.value,"onUpdate:modelValue":d=>l.value=d,label:"Password",type:"password",dense:""},null,8,["modelValue","onUpdate:modelValue"]),a.value?(B(),R("div",{key:0,class:"text-negative text-center q-mb-sm"},N(a.value),1)):j("",!0),e("div",{class:"row justify-center"},[e(V,{label:"Login",type:"submit",color:"primary"})])]}),_:1},M,P));else return[e(L,{onSubmit:z(c,["prevent"]),class:"q-gutter-md"},{default:n(()=>[e(s,{filled:"",modelValue:t.value,"onUpdate:modelValue":x=>t.value=x,label:"Username",dense:"",autofocus:""},null,8,["modelValue","onUpdate:modelValue"]),e(s,{filled:"",modelValue:l.value,"onUpdate:modelValue":x=>l.value=x,label:"Password",type:"password",dense:""},null,8,["modelValue","onUpdate:modelValue"]),a.value?(B(),R("div",{key:0,class:"text-negative text-center q-mb-sm"},N(a.value),1)):j("",!0),e("div",{class:"row justify-center"},[e(V,{label:"Login",type:"submit",color:"primary"})])]),_:1})]}),_:1},C,S));else return[e(g,null,{default:n(()=>[e("div",{class:"text-h6 text-center"},"Login")]),_:1}),e(D),e(g,null,{default:n(()=>[e(L,{onSubmit:z(c,["prevent"]),class:"q-gutter-md"},{default:n(()=>[e(s,{filled:"",modelValue:t.value,"onUpdate:modelValue":p=>t.value=p,label:"Username",dense:"",autofocus:""},null,8,["modelValue","onUpdate:modelValue"]),e(s,{filled:"",modelValue:l.value,"onUpdate:modelValue":p=>l.value=p,label:"Password",type:"password",dense:""},null,8,["modelValue","onUpdate:modelValue"]),a.value?(B(),R("div",{key:0,class:"text-negative text-center q-mb-sm"},N(a.value),1)):j("",!0),e("div",{class:"row justify-center"},[e(V,{label:"Login",type:"submit",color:"primary"})])]),_:1})]),_:1})]}),_:1},w))}}},A=y.setup;y.setup=(i,t)=>{const l=G();return(l.modules||(l.modules=new Set)).add("src/components/LoginCard.vue"),A?A(i,t):void 0};const H={__name:"LoginPage",__ssrInlineRender:!0,setup(i){return(t,l,a,q)=>{const c=m("q-page");l(o(c,F({class:"flex flex-center"},q),{default:n((r,_,w,U)=>{if(_)_(o(y,null,null,w,U));else return[e(y)]}),_:1},a))}}},E=H.setup;H.setup=(i,t)=>{const l=G();return(l.modules||(l.modules=new Set)).add("src/pages/LoginPage.vue"),E?E(i,t):void 0};export{H as default};
