import{ref as M,reactive as K,computed as L,resolveComponent as U,mergeProps as W,withCtx as c,createVNode as l,createBlock as h,openBlock as S,toDisplayString as G,withModifiers as X,useSSRContext as Y}from"vue";import{ssrRenderComponent as s,ssrInterpolate as O}from"vue/server-renderer";import{M as f}from"./MainContainer-B23X3pGe.js";import{useQuasar as Z}from"quasar";import I from"axios";import{_}from"./_plugin-vue_export-helper-DlAUqK2U.js";const B={__name:"CustomerCard",__ssrInlineRender:!0,setup(F){const C=Z(),q=M(null),N=M(!1),r=g=>!!g||"Required",T=g=>!g||/.+@.+\..+/.test(g)||"Invalid email",w=M([{label:"Customer",value:"_CUSTOMER"}]),A=M([{label:"B2B",value:"B2B"},{label:"B2C",value:"B2C"}]),e=K({customerNumber:"",customerName:"",title:"",idNumber:"",tradingName:"",registeredMraName:"",customerCategory:"",customerGroup:"",customerType:"",status:"",MRAType:"",address1:"",address2:"",postCode:"",city:"",country:"",phoneNumber:"",email:"",faxNumber:""}),$=L(()=>!!e.customerName&&!!e.customerCategory&&!!e.customerGroup);async function x(){if(await q.value.validate()){N.value=!0;try{const V=await I.post("/soap/customers",e);if(V.data.success){const p=V.data.data;e.customerNumber=p.No||e.customerNumber,e.customerName=p.Name||e.customerName,e.city=p.City||e.city,e.country=p.Country_Region_Code||e.country,e.email=p.E_Mail||e.email,C.notify({type:"positive",message:"Customer saved successfully!"}),console.log("✅ NAV Create Result:",p)}else C.notify({type:"negative",message:"Save failed: "+V.data.error}),console.error("❌ API error:",V.data.error)}catch(V){C.notify({type:"negative",message:"Save failed. Check console."}),console.error("❌ SOAP Save error:",V)}finally{N.value=!1}}}return(g,V,p,Q)=>{const j=U("q-page"),D=U("q-form"),k=U("q-icon"),i=U("q-separator"),o=U("q-input"),b=U("q-select"),R=U("q-btn");V(s(j,W({class:"flex flex-center"},Q),{default:c((ee,E,H,J)=>{if(E)E(s(D,{ref_key:"mainForm",ref:q,onSubmit:x,class:"q-pa-lg"},{default:c((u,v,P,y)=>{if(v)e.customerNumber?v(`<div class="row q-mt-sm" data-v-3ba33b5a${y}><div class="col-12" data-v-3ba33b5a${y}><h1 class="text-h5 q-mb-sm q-ml-sm text-primary" data-v-3ba33b5a${y}>${O(e.customerNumber)} - ${O(e.customerName)}</h1></div></div>`):(v(`<div class="text-grey q-py-md flex items-center" data-v-3ba33b5a${y}>`),v(s(k,{name:"info",size:"sm",class:"q-mr-sm"},null,P,y)),v(`<p class="text-h6 no-margin" data-v-3ba33b5a${y}>No customer created yet.</p></div>`)),v(s(f,null,{default:c((t,m,n,d)=>{if(m)m(`<div class="row" data-v-3ba33b5a${d}><div class="col-12" data-v-3ba33b5a${d}><h2 class="text-h6 text-primary no-margin" data-v-3ba33b5a${d}>Create Customer</h2>`),m(s(i,{color:"grey-4",class:"q-mb-md"},null,n,d)),m(`</div></div><div class="row q-col-gutter-lg" data-v-3ba33b5a${d}><div class="col-12 col-md-6" data-v-3ba33b5a${d}>`),m(s(o,{modelValue:e.customerNumber,"onUpdate:modelValue":a=>e.customerNumber=a,type:"text",outlined:"",dense:"",label:"Customer No."},null,n,d)),m(s(o,{modelValue:e.customerName,"onUpdate:modelValue":a=>e.customerName=a,type:"text",outlined:"",dense:"",rules:[r],label:"Name",class:"q-my-md"},null,n,d)),m(s(o,{modelValue:e.title,"onUpdate:modelValue":a=>e.title=a,type:"text",outlined:"",dense:"",label:"Title"},null,n,d)),m(s(o,{modelValue:e.idNumber,"onUpdate:modelValue":a=>e.idNumber=a,type:"text",outlined:"",dense:"",label:"ID Number",class:"q-my-md"},null,n,d)),m(s(o,{modelValue:e.tradingName,"onUpdate:modelValue":a=>e.tradingName=a,type:"text",outlined:"",dense:"",label:"Trading Name",class:"q-my-md"},null,n,d)),m(`</div><div class="col-12 col-md-6" data-v-3ba33b5a${d}>`),m(s(b,{modelValue:e.customerGroup,"onUpdate:modelValue":a=>e.customerGroup=a,options:w.value,outlined:"",dense:"",rules:[r],label:"Customer Group","emit-value":"","map-options":""},null,n,d)),m(s(b,{modelValue:e.customerType,"onUpdate:modelValue":a=>e.customerType=a,options:A.value,outlined:"",dense:"",rules:[r],label:"Customer Type","emit-value":"","map-options":""},null,n,d)),m(s(o,{modelValue:e.MRAType,"onUpdate:modelValue":a=>e.MRAType=a,type:"text",outlined:"",dense:"",label:"Customer Type for MRA",class:"q-my-md"},null,n,d)),m("</div></div>");else return[l("div",{class:"row"},[l("div",{class:"col-12"},[l("h2",{class:"text-h6 text-primary no-margin"},"Create Customer"),l(i,{color:"grey-4",class:"q-mb-md"})])]),l("div",{class:"row q-col-gutter-lg"},[l("div",{class:"col-12 col-md-6"},[l(o,{modelValue:e.customerNumber,"onUpdate:modelValue":a=>e.customerNumber=a,type:"text",outlined:"",dense:"",label:"Customer No."},null,8,["modelValue","onUpdate:modelValue"]),l(o,{modelValue:e.customerName,"onUpdate:modelValue":a=>e.customerName=a,type:"text",outlined:"",dense:"",rules:[r],label:"Name",class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue","rules"]),l(o,{modelValue:e.title,"onUpdate:modelValue":a=>e.title=a,type:"text",outlined:"",dense:"",label:"Title"},null,8,["modelValue","onUpdate:modelValue"]),l(o,{modelValue:e.idNumber,"onUpdate:modelValue":a=>e.idNumber=a,type:"text",outlined:"",dense:"",label:"ID Number",class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue"]),l(o,{modelValue:e.tradingName,"onUpdate:modelValue":a=>e.tradingName=a,type:"text",outlined:"",dense:"",label:"Trading Name",class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",{class:"col-12 col-md-6"},[l(b,{modelValue:e.customerGroup,"onUpdate:modelValue":a=>e.customerGroup=a,options:w.value,outlined:"",dense:"",rules:[r],label:"Customer Group","emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue","options","rules"]),l(b,{modelValue:e.customerType,"onUpdate:modelValue":a=>e.customerType=a,options:A.value,outlined:"",dense:"",rules:[r],label:"Customer Type","emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue","options","rules"]),l(o,{modelValue:e.MRAType,"onUpdate:modelValue":a=>e.MRAType=a,type:"text",outlined:"",dense:"",label:"Customer Type for MRA",class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue"])])])]}),_:1},P,y)),v(s(f,null,{default:c((t,m,n,d)=>{if(m)m(`<div class="row" data-v-3ba33b5a${d}><div class="col-12" data-v-3ba33b5a${d}><h2 class="text-h6 text-primary no-margin" data-v-3ba33b5a${d}>Address &amp; Contact</h2>`),m(s(i,{color:"grey-4",class:"q-mb-md"},null,n,d)),m(`</div></div><div class="row q-col-gutter-lg" data-v-3ba33b5a${d}><div class="col-12 col-md-6" data-v-3ba33b5a${d}>`),m(s(o,{modelValue:e.address1,"onUpdate:modelValue":a=>e.address1=a,outlined:"",dense:"",label:"Address 1",rules:[r],class:"q-my-md"},null,n,d)),m(s(o,{modelValue:e.address2,"onUpdate:modelValue":a=>e.address2=a,outlined:"",dense:"",label:"Address 2",class:"q-my-md"},null,n,d)),m(s(o,{modelValue:e.postCode,"onUpdate:modelValue":a=>e.postCode=a,type:"text",outlined:"",dense:"",label:"Post Code",class:"q-my-md"},null,n,d)),m(s(o,{modelValue:e.city,"onUpdate:modelValue":a=>e.city=a,outlined:"",dense:"",label:"City",rules:[r],class:"q-my-md"},null,n,d)),m(s(o,{modelValue:e.country,"onUpdate:modelValue":a=>e.country=a,outlined:"",dense:"",label:"Country",class:"q-my-md"},null,n,d)),m(`</div><div class="col-12 col-md-6" data-v-3ba33b5a${d}>`),m(s(o,{modelValue:e.phoneNumber,"onUpdate:modelValue":a=>e.phoneNumber=a,type:"tel",outlined:"",dense:"",label:"Phone Number",class:"q-my-md"},null,n,d)),m(s(o,{modelValue:e.email,"onUpdate:modelValue":a=>e.email=a,type:"email",outlined:"",dense:"",label:"Email",rules:[T],class:"q-my-md"},null,n,d)),m(s(o,{modelValue:e.faxNumber,"onUpdate:modelValue":a=>e.faxNumber=a,type:"text",outlined:"",dense:"",label:"Fax Number",class:"q-my-md"},null,n,d)),m(`</div></div><div class="row" data-v-3ba33b5a${d}>`),m(s(i,{color:"grey-4",class:"full-width"},null,n,d)),m(`<div class="col-12 flex flex-center" data-v-3ba33b5a${d}>`),m(s(R,{loading:N.value,icon:"cloud_upload",color:"light-blue-14",label:"Submit",class:"rounded-borders q-mt-md",onClick:x,outline:"",disable:!$.value},null,n,d)),m("</div></div>");else return[l("div",{class:"row"},[l("div",{class:"col-12"},[l("h2",{class:"text-h6 text-primary no-margin"},"Address & Contact"),l(i,{color:"grey-4",class:"q-mb-md"})])]),l("div",{class:"row q-col-gutter-lg"},[l("div",{class:"col-12 col-md-6"},[l(o,{modelValue:e.address1,"onUpdate:modelValue":a=>e.address1=a,outlined:"",dense:"",label:"Address 1",rules:[r],class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue","rules"]),l(o,{modelValue:e.address2,"onUpdate:modelValue":a=>e.address2=a,outlined:"",dense:"",label:"Address 2",class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue"]),l(o,{modelValue:e.postCode,"onUpdate:modelValue":a=>e.postCode=a,type:"text",outlined:"",dense:"",label:"Post Code",class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue"]),l(o,{modelValue:e.city,"onUpdate:modelValue":a=>e.city=a,outlined:"",dense:"",label:"City",rules:[r],class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue","rules"]),l(o,{modelValue:e.country,"onUpdate:modelValue":a=>e.country=a,outlined:"",dense:"",label:"Country",class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",{class:"col-12 col-md-6"},[l(o,{modelValue:e.phoneNumber,"onUpdate:modelValue":a=>e.phoneNumber=a,type:"tel",outlined:"",dense:"",label:"Phone Number",class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue"]),l(o,{modelValue:e.email,"onUpdate:modelValue":a=>e.email=a,type:"email",outlined:"",dense:"",label:"Email",rules:[T],class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue","rules"]),l(o,{modelValue:e.faxNumber,"onUpdate:modelValue":a=>e.faxNumber=a,type:"text",outlined:"",dense:"",label:"Fax Number",class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue"])])]),l("div",{class:"row"},[l(i,{color:"grey-4",class:"full-width"}),l("div",{class:"col-12 flex flex-center"},[l(R,{loading:N.value,icon:"cloud_upload",color:"light-blue-14",label:"Submit",class:"rounded-borders q-mt-md",onClick:x,outline:"",disable:!$.value},null,8,["loading","disable"])])])]}),_:1},P,y));else return[e.customerNumber?(S(),h("div",{key:0,class:"row q-mt-sm"},[l("div",{class:"col-12"},[l("h1",{class:"text-h5 q-mb-sm q-ml-sm text-primary"},G(e.customerNumber)+" - "+G(e.customerName),1)])])):(S(),h("div",{key:1,class:"text-grey q-py-md flex items-center"},[l(k,{name:"info",size:"sm",class:"q-mr-sm"}),l("p",{class:"text-h6 no-margin"},"No customer created yet.")])),l(f,null,{default:c(()=>[l("div",{class:"row"},[l("div",{class:"col-12"},[l("h2",{class:"text-h6 text-primary no-margin"},"Create Customer"),l(i,{color:"grey-4",class:"q-mb-md"})])]),l("div",{class:"row q-col-gutter-lg"},[l("div",{class:"col-12 col-md-6"},[l(o,{modelValue:e.customerNumber,"onUpdate:modelValue":t=>e.customerNumber=t,type:"text",outlined:"",dense:"",label:"Customer No."},null,8,["modelValue","onUpdate:modelValue"]),l(o,{modelValue:e.customerName,"onUpdate:modelValue":t=>e.customerName=t,type:"text",outlined:"",dense:"",rules:[r],label:"Name",class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue","rules"]),l(o,{modelValue:e.title,"onUpdate:modelValue":t=>e.title=t,type:"text",outlined:"",dense:"",label:"Title"},null,8,["modelValue","onUpdate:modelValue"]),l(o,{modelValue:e.idNumber,"onUpdate:modelValue":t=>e.idNumber=t,type:"text",outlined:"",dense:"",label:"ID Number",class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue"]),l(o,{modelValue:e.tradingName,"onUpdate:modelValue":t=>e.tradingName=t,type:"text",outlined:"",dense:"",label:"Trading Name",class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",{class:"col-12 col-md-6"},[l(b,{modelValue:e.customerGroup,"onUpdate:modelValue":t=>e.customerGroup=t,options:w.value,outlined:"",dense:"",rules:[r],label:"Customer Group","emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue","options","rules"]),l(b,{modelValue:e.customerType,"onUpdate:modelValue":t=>e.customerType=t,options:A.value,outlined:"",dense:"",rules:[r],label:"Customer Type","emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue","options","rules"]),l(o,{modelValue:e.MRAType,"onUpdate:modelValue":t=>e.MRAType=t,type:"text",outlined:"",dense:"",label:"Customer Type for MRA",class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue"])])])]),_:1}),l(f,null,{default:c(()=>[l("div",{class:"row"},[l("div",{class:"col-12"},[l("h2",{class:"text-h6 text-primary no-margin"},"Address & Contact"),l(i,{color:"grey-4",class:"q-mb-md"})])]),l("div",{class:"row q-col-gutter-lg"},[l("div",{class:"col-12 col-md-6"},[l(o,{modelValue:e.address1,"onUpdate:modelValue":t=>e.address1=t,outlined:"",dense:"",label:"Address 1",rules:[r],class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue","rules"]),l(o,{modelValue:e.address2,"onUpdate:modelValue":t=>e.address2=t,outlined:"",dense:"",label:"Address 2",class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue"]),l(o,{modelValue:e.postCode,"onUpdate:modelValue":t=>e.postCode=t,type:"text",outlined:"",dense:"",label:"Post Code",class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue"]),l(o,{modelValue:e.city,"onUpdate:modelValue":t=>e.city=t,outlined:"",dense:"",label:"City",rules:[r],class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue","rules"]),l(o,{modelValue:e.country,"onUpdate:modelValue":t=>e.country=t,outlined:"",dense:"",label:"Country",class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",{class:"col-12 col-md-6"},[l(o,{modelValue:e.phoneNumber,"onUpdate:modelValue":t=>e.phoneNumber=t,type:"tel",outlined:"",dense:"",label:"Phone Number",class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue"]),l(o,{modelValue:e.email,"onUpdate:modelValue":t=>e.email=t,type:"email",outlined:"",dense:"",label:"Email",rules:[T],class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue","rules"]),l(o,{modelValue:e.faxNumber,"onUpdate:modelValue":t=>e.faxNumber=t,type:"text",outlined:"",dense:"",label:"Fax Number",class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue"])])]),l("div",{class:"row"},[l(i,{color:"grey-4",class:"full-width"}),l("div",{class:"col-12 flex flex-center"},[l(R,{loading:N.value,icon:"cloud_upload",color:"light-blue-14",label:"Submit",class:"rounded-borders q-mt-md",onClick:x,outline:"",disable:!$.value},null,8,["loading","disable"])])])]),_:1})]}),_:1},H,J));else return[l(D,{ref_key:"mainForm",ref:q,onSubmit:X(x,["prevent"]),class:"q-pa-lg"},{default:c(()=>[e.customerNumber?(S(),h("div",{key:0,class:"row q-mt-sm"},[l("div",{class:"col-12"},[l("h1",{class:"text-h5 q-mb-sm q-ml-sm text-primary"},G(e.customerNumber)+" - "+G(e.customerName),1)])])):(S(),h("div",{key:1,class:"text-grey q-py-md flex items-center"},[l(k,{name:"info",size:"sm",class:"q-mr-sm"}),l("p",{class:"text-h6 no-margin"},"No customer created yet.")])),l(f,null,{default:c(()=>[l("div",{class:"row"},[l("div",{class:"col-12"},[l("h2",{class:"text-h6 text-primary no-margin"},"Create Customer"),l(i,{color:"grey-4",class:"q-mb-md"})])]),l("div",{class:"row q-col-gutter-lg"},[l("div",{class:"col-12 col-md-6"},[l(o,{modelValue:e.customerNumber,"onUpdate:modelValue":u=>e.customerNumber=u,type:"text",outlined:"",dense:"",label:"Customer No."},null,8,["modelValue","onUpdate:modelValue"]),l(o,{modelValue:e.customerName,"onUpdate:modelValue":u=>e.customerName=u,type:"text",outlined:"",dense:"",rules:[r],label:"Name",class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue","rules"]),l(o,{modelValue:e.title,"onUpdate:modelValue":u=>e.title=u,type:"text",outlined:"",dense:"",label:"Title"},null,8,["modelValue","onUpdate:modelValue"]),l(o,{modelValue:e.idNumber,"onUpdate:modelValue":u=>e.idNumber=u,type:"text",outlined:"",dense:"",label:"ID Number",class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue"]),l(o,{modelValue:e.tradingName,"onUpdate:modelValue":u=>e.tradingName=u,type:"text",outlined:"",dense:"",label:"Trading Name",class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",{class:"col-12 col-md-6"},[l(b,{modelValue:e.customerGroup,"onUpdate:modelValue":u=>e.customerGroup=u,options:w.value,outlined:"",dense:"",rules:[r],label:"Customer Group","emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue","options","rules"]),l(b,{modelValue:e.customerType,"onUpdate:modelValue":u=>e.customerType=u,options:A.value,outlined:"",dense:"",rules:[r],label:"Customer Type","emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue","options","rules"]),l(o,{modelValue:e.MRAType,"onUpdate:modelValue":u=>e.MRAType=u,type:"text",outlined:"",dense:"",label:"Customer Type for MRA",class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue"])])])]),_:1}),l(f,null,{default:c(()=>[l("div",{class:"row"},[l("div",{class:"col-12"},[l("h2",{class:"text-h6 text-primary no-margin"},"Address & Contact"),l(i,{color:"grey-4",class:"q-mb-md"})])]),l("div",{class:"row q-col-gutter-lg"},[l("div",{class:"col-12 col-md-6"},[l(o,{modelValue:e.address1,"onUpdate:modelValue":u=>e.address1=u,outlined:"",dense:"",label:"Address 1",rules:[r],class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue","rules"]),l(o,{modelValue:e.address2,"onUpdate:modelValue":u=>e.address2=u,outlined:"",dense:"",label:"Address 2",class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue"]),l(o,{modelValue:e.postCode,"onUpdate:modelValue":u=>e.postCode=u,type:"text",outlined:"",dense:"",label:"Post Code",class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue"]),l(o,{modelValue:e.city,"onUpdate:modelValue":u=>e.city=u,outlined:"",dense:"",label:"City",rules:[r],class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue","rules"]),l(o,{modelValue:e.country,"onUpdate:modelValue":u=>e.country=u,outlined:"",dense:"",label:"Country",class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",{class:"col-12 col-md-6"},[l(o,{modelValue:e.phoneNumber,"onUpdate:modelValue":u=>e.phoneNumber=u,type:"tel",outlined:"",dense:"",label:"Phone Number",class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue"]),l(o,{modelValue:e.email,"onUpdate:modelValue":u=>e.email=u,type:"email",outlined:"",dense:"",label:"Email",rules:[T],class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue","rules"]),l(o,{modelValue:e.faxNumber,"onUpdate:modelValue":u=>e.faxNumber=u,type:"text",outlined:"",dense:"",label:"Fax Number",class:"q-my-md"},null,8,["modelValue","onUpdate:modelValue"])])]),l("div",{class:"row"},[l(i,{color:"grey-4",class:"full-width"}),l("div",{class:"col-12 flex flex-center"},[l(R,{loading:N.value,icon:"cloud_upload",color:"light-blue-14",label:"Submit",class:"rounded-borders q-mt-md",onClick:x,outline:"",disable:!$.value},null,8,["loading","disable"])])])]),_:1})]),_:1},512)]}),_:1},p))}}},z=B.setup;B.setup=(F,C)=>{const q=Y();return(q.modules||(q.modules=new Set)).add("src/pages/CustomerCard.vue"),z?z(F,C):void 0};const ue=_(B,[["__scopeId","data-v-3ba33b5a"]]);export{ue as default};
