import{j as m,N as U,f as _,c as w,o as c,w as r,b as s,l as S,m as V,k as t,t as v,Y as T,Q as B,a as A}from"./index-C9XCHekm.js";import{b as M,Q as p,c as a,d as Q}from"./QForm-WN6hfPr-.js";import{d as k,M as f,e as N}from"./MainContainer-D12cjy8E.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G={key:0,class:"row q-mt-sm"},I={class:"col-12"},P={class:"text-h5 q-mb-sm q-ml-sm text-primary"},E={key:1,class:"text-grey q-py-md flex items-center"},F={class:"row"},O={class:"col-12"},D={class:"row q-col-gutter-lg"},j={class:"col-12 col-md-6"},z={class:"col-12 col-md-6"},Y={class:"row"},$={class:"col-12"},H={class:"row q-col-gutter-lg"},J={class:"col-12 col-md-6"},K={class:"col-12 col-md-6"},L={class:"row"},W={class:"col-12 flex flex-center"},X={__name:"CustomerCard",setup(Z){const n=k(),y=m(null),i=m(!1),u=d=>!!d||"Required",g=d=>!d||/.+@.+\..+/.test(d)||"Invalid email",C=m([{label:"Customer",value:"_CUSTOMER"}]),x=m([{label:"B2B",value:"B2B"},{label:"B2C",value:"B2C"}]),e=U({customerNumber:"",customerName:"",title:"",idNumber:"",tradingName:"",registeredMraName:"",customerCategory:"",customerGroup:"",customerType:"",status:"",MRAType:"",address1:"",address2:"",postCode:"",city:"",country:"",phoneNumber:"",email:"",faxNumber:""}),q=_(()=>!!e.customerName&&!!e.customerCategory&&!!e.customerGroup);async function b(){if(await y.value.validate()){i.value=!0;try{const l=await A.post("/soap/customers",e);if(l.data.success){const o=l.data.data;e.customerNumber=o.No||e.customerNumber,e.customerName=o.Name||e.customerName,e.city=o.City||e.city,e.country=o.Country_Region_Code||e.country,e.email=o.E_Mail||e.email,n.notify({type:"positive",message:"Customer saved successfully!"}),console.log("✅ NAV Create Result:",o)}else n.notify({type:"negative",message:"Save failed: "+l.data.error}),console.error("❌ API error:",l.data.error)}catch(l){n.notify({type:"negative",message:"Save failed. Check console."}),console.error("❌ SOAP Save error:",l)}finally{i.value=!1}}}return(d,l)=>(c(),w(Q,{class:"flex flex-center"},{default:r(()=>[s(M,{ref_key:"mainForm",ref:y,onSubmit:S(b,["prevent"]),class:"q-pa-lg"},{default:r(()=>[e.customerNumber?(c(),V("div",G,[t("div",I,[t("h1",P,v(e.customerNumber)+" - "+v(e.customerName),1)])])):(c(),V("div",E,[s(T,{name:"info",size:"sm",class:"q-mr-sm"}),l[16]||(l[16]=t("p",{class:"text-h6 no-margin"},"No customer created yet.",-1))])),s(f,null,{default:r(()=>[t("div",F,[t("div",O,[l[17]||(l[17]=t("h2",{class:"text-h6 text-primary no-margin"},"Create Customer",-1)),s(p,{color:"grey-4",class:"q-mb-md"})])]),t("div",D,[t("div",j,[s(a,{modelValue:e.customerNumber,"onUpdate:modelValue":l[0]||(l[0]=o=>e.customerNumber=o),type:"text",outlined:"",dense:"",label:"Customer No."},null,8,["modelValue"]),s(a,{modelValue:e.customerName,"onUpdate:modelValue":l[1]||(l[1]=o=>e.customerName=o),type:"text",outlined:"",dense:"",rules:[u],label:"Name",class:"q-my-md"},null,8,["modelValue","rules"]),s(a,{modelValue:e.title,"onUpdate:modelValue":l[2]||(l[2]=o=>e.title=o),type:"text",outlined:"",dense:"",label:"Title"},null,8,["modelValue"]),s(a,{modelValue:e.idNumber,"onUpdate:modelValue":l[3]||(l[3]=o=>e.idNumber=o),type:"text",outlined:"",dense:"",label:"ID Number",class:"q-my-md"},null,8,["modelValue"]),s(a,{modelValue:e.tradingName,"onUpdate:modelValue":l[4]||(l[4]=o=>e.tradingName=o),type:"text",outlined:"",dense:"",label:"Trading Name",class:"q-my-md"},null,8,["modelValue"])]),t("div",z,[s(N,{modelValue:e.customerGroup,"onUpdate:modelValue":l[5]||(l[5]=o=>e.customerGroup=o),options:C.value,outlined:"",dense:"",rules:[u],label:"Customer Group","emit-value":"","map-options":""},null,8,["modelValue","options","rules"]),s(N,{modelValue:e.customerType,"onUpdate:modelValue":l[6]||(l[6]=o=>e.customerType=o),options:x.value,outlined:"",dense:"",rules:[u],label:"Customer Type","emit-value":"","map-options":""},null,8,["modelValue","options","rules"]),s(a,{modelValue:e.MRAType,"onUpdate:modelValue":l[7]||(l[7]=o=>e.MRAType=o),type:"text",outlined:"",dense:"",label:"Customer Type for MRA",class:"q-my-md"},null,8,["modelValue"])])])]),_:1}),s(f,null,{default:r(()=>[t("div",Y,[t("div",$,[l[18]||(l[18]=t("h2",{class:"text-h6 text-primary no-margin"},"Address & Contact",-1)),s(p,{color:"grey-4",class:"q-mb-md"})])]),t("div",H,[t("div",J,[s(a,{modelValue:e.address1,"onUpdate:modelValue":l[8]||(l[8]=o=>e.address1=o),outlined:"",dense:"",label:"Address 1",rules:[u],class:"q-my-md"},null,8,["modelValue","rules"]),s(a,{modelValue:e.address2,"onUpdate:modelValue":l[9]||(l[9]=o=>e.address2=o),outlined:"",dense:"",label:"Address 2",class:"q-my-md"},null,8,["modelValue"]),s(a,{modelValue:e.postCode,"onUpdate:modelValue":l[10]||(l[10]=o=>e.postCode=o),type:"text",outlined:"",dense:"",label:"Post Code",class:"q-my-md"},null,8,["modelValue"]),s(a,{modelValue:e.city,"onUpdate:modelValue":l[11]||(l[11]=o=>e.city=o),outlined:"",dense:"",label:"City",rules:[u],class:"q-my-md"},null,8,["modelValue","rules"]),s(a,{modelValue:e.country,"onUpdate:modelValue":l[12]||(l[12]=o=>e.country=o),outlined:"",dense:"",label:"Country",class:"q-my-md"},null,8,["modelValue"])]),t("div",K,[s(a,{modelValue:e.phoneNumber,"onUpdate:modelValue":l[13]||(l[13]=o=>e.phoneNumber=o),type:"tel",outlined:"",dense:"",label:"Phone Number",class:"q-my-md"},null,8,["modelValue"]),s(a,{modelValue:e.email,"onUpdate:modelValue":l[14]||(l[14]=o=>e.email=o),type:"email",outlined:"",dense:"",label:"Email",rules:[g],class:"q-my-md"},null,8,["modelValue","rules"]),s(a,{modelValue:e.faxNumber,"onUpdate:modelValue":l[15]||(l[15]=o=>e.faxNumber=o),type:"text",outlined:"",dense:"",label:"Fax Number",class:"q-my-md"},null,8,["modelValue"])])]),t("div",L,[s(p,{color:"grey-4",class:"full-width"}),t("div",W,[s(B,{loading:i.value,icon:"cloud_upload",color:"light-blue-14",label:"Submit",class:"rounded-borders q-mt-md",onClick:b,outline:"",disable:!q.value},null,8,["loading","disable"])])])]),_:1})]),_:1},512)]),_:1}))}},se=R(X,[["__scopeId","data-v-3ba33b5a"]]);export{se as default};
